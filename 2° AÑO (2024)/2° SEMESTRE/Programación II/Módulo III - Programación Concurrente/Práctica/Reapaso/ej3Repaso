programa ej3Repaso

procesos
  
  proceso dejarEnDeposito
  comenzar
    BloquearEsquina(10,10)
    avAct:=PosAv
    caAct:=PosCa
    Pos(10,10)
    mientras HayFlorEnLaBolsa
      depositarFlor
    Pos(avAct,caAct)
    LiberarEsquina(10,10)
  fin
  
areas
  ca3: AreaP (1,3,100,3)
  ca4: AreaP (1,4,100,4)
  deposito: AreaP (10,10,10,10)
  esqCosechador: AreaP (1,5,1,5)
  
robots

  robot tipoRecolector
  comenzar
    cantF:=0
    cantEsq:=0
    mientras (PosAv<=99)
      EnviarMensaje(0,rCosechador)
      mientras (HayFlorEnLaEsquina) & (cantF<10) & (cantEsq<15)
        tomarFlor
        cantF:=cantF+1
      si (cantF=10)
        dejarEnDeposito
        EnviarMensaje(juntar,rCosechador)
        cantF:=0
      si (cantEsq=15)
        dejarEnDeposito
        EnviarMensaje(juntar,rCosechador)
        cantEsq:=0
      mover
      cantEsq:=cantEsq+1
  EnviarMensaje(1,rCosechador)
  fin
  
  robot tipoCosechador
  comenzar
    termine1:=0
    termine2:=0
    cantF:=0
    mientras (termine1<>1) & (termine2<>1)
      RecibirMensaje(juntar,*)
      juntarEnDeposito(cantF)
      RecibirMensaje(termine1,*)
      RecibirMensaje(termine2,*)
    Informar(cantF)
  fin
  
variables
  rRecolector1:tipoRecolector
  rRecolector2:tipoRecolector
  rCosechador:tipoCosechador
  
comenzar
  AsignarArea(rRecolector1, ca3)
  AsignarArea(rRecolector1, deposito)
  AsignarArea(rRecolector2, ca4)
  AsignarArea(rRecolector2, deposito)
  AsignarArea(rCosechador, deposito)  
  Iniciar(rRecolector1, 1,3)
  Iniciar(rRecolector2, 1,4)
  Iniciar(rCosechador, 1,5)
fin
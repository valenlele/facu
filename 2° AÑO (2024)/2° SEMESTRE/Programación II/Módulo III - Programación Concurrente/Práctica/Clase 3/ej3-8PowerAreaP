programa ej8PowerAreaP
  
procesos
  proceso  tomarYcontarFlores(ES totFloresEsq:numero)
  comenzar
    totFloresEsq:=0
    mientras HayFlorEnLaEsquina
      tomarFlor
      totFloresEsq:=totFloresEsq+1  
  fin
  
areas
  area1: AreaP (2,2,7,7)
  area2: AreaP (8,2,13,7)
  area3: AreaP (14,2,19,7)
  areaF: AreaP(1,1,1,1)
  
robots
  robot tipo1
  variables
    totFloresEsq:numero
    av:numero
    ca:numero
  comenzar 
    repetir 3
      Random(av,2,7)
      Random(ca,2,7)
      Pos(av,ca)
      totFloresEsq:=0
      tomarYcontarFlores(totFloresEsq)
      EnviarMensaje(totFloresEsq,robotF)
      Pos(2,2)
  fin
  
  robot tipo2
  variables
    totFloresEsq:numero
    av:numero
    ca:numero
  comenzar 
    repetir 3
      Random(av,8,13)
      Random(ca,2,7)
      Pos(av,ca)
      tomarYcontarFlores(totFloresEsq)
      EnviarMensaje(totFloresEsq,robotF)
      Pos(8,2)
  fin
  
  robot tipo3
  variables
    totFloresEsq:numero
    av:numero
    ca:numero
  comenzar 
    repetir 3
      Random(av,14,19)
      Random(ca,2,7)
      Pos(av,ca)
      tomarYcontarFlores(totFloresEsq)
      EnviarMensaje(totFloresEsq,robotF)
      Pos(14,2)
  fin
  
  robot tipoF
  variables
    totFlores:numero
    totFloresEsq:numero
    av:numero
    ca:numero
  comenzar 
    totFlores:=0
    repetir 9
      RecibirMensaje(totFloresEsq,*)
      totFlores:=totFlores+totFloresEsq
    Informar(totFlores)
  fin
  
variables
  robot1:tipo1
  robot2:tipo2
  robot3:tipo3
  robotF:tipoF
  
comenzar
  AsignarArea(robot1,area1)
  AsignarArea(robot2,area2)
  AsignarArea(robot3,area3)
  AsignarArea(robotF,areaF)
  Iniciar(robot1, 2,2)
  Iniciar(robot2, 8,2)
  Iniciar(robot3, 14,2)
  Iniciar(robotF, 1,1)
fin
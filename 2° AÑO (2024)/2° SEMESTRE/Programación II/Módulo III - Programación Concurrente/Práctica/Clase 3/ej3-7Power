programa ej7Power
  
procesos
  proceso  contarFlores(ES totFlores:numero)
  variables
    floresEsq:numero
  comenzar
    floresEsq:=0
    mientras HayFlorEnLaEsquina
      tomarFlor
      floresEsq:=floresEsq+1
    totFlores:=totFlores+floresEsq
    mientras HayFlorEnLaBolsa
      depositarFlor    
  fin
  
  proceso recorrerYcontar(E base:numero ; E altura:numero ; ES totFlores:numero)
  comenzar 
    repetir 2 
      repetir altura
        contarFlores(totFlores)
        mover
      derecha
      repetir base
        contarFlores(totFlores)
        mover
      derecha    
  fin
  
  proceso enviarInicioRobot(E nroRobot:numero; E av:numero; E ca:numero)
  comenzar
    si nroRobot=1
      EnviarMensaje(12,robot1)
      EnviarMensaje(10,robot1)
    si nroRobot=2
      EnviarMensaje(16,robot2)
      EnviarMensaje(10,robot2)
    si nroRobot=3
      EnviarMensaje(20,robot3)
      EnviarMensaje(10,robot3)
    si nroRobot=4
      EnviarMensaje(24,robot4)
      EnviarMensaje(10,robot4)
  fin
  
  proceso enviarAlto(E nroRobot:numero)
  variables
    alto:numero
  comenzar
    si nroRobot=1
      Random(alto,5,20)
      EnviarMensaje(alto,robot1) 
    si nroRobot=2
      Random(alto,5,20)
      EnviarMensaje(alto,robot2)
    si nroRobot=3
      Random(alto,5,20)
      EnviarMensaje(alto,robot3)
    si nroRobot=4
      Random(alto,5,20)
      EnviarMensaje(alto,robot4)   
  fin
  
  proceso evaluarMax(E aux:numero; E quienSos:numero; ES max:numero; ES maxRobot:numero)
  comenzar
    si aux>max
      max:=aux
      maxRobot:=quienSos  
  fin
  
areas
  ciudad: AreaC (1,1,100,100)
  
robots
  robot tipo1
  variables
    totFlores:numero
    av:numero
    ca:numero
    alto:numero
  comenzar 
    RecibirMensaje(av,robot5)
    RecibirMensaje(ca,robot5)
    Pos(av,ca)
    RecibirMensaje(alto,robot5)
    totFlores:=0 
    recorrerYcontar(3,alto,totFlores)   
    Informar(totFlores)  
    EnviarMensaje(totFlores,robot5)
    EnviarMensaje(1,robot5)
  fin
  
  robot tipo2
  variables
    totFlores:numero
    av:numero
    ca:numero
    alto:numero
  comenzar 
    RecibirMensaje(av,robot5)
    RecibirMensaje(ca,robot5)
    Pos(av,ca)
    RecibirMensaje(alto,robot5)
    totFlores:=0 
    recorrerYcontar(3,alto,totFlores)   
    Informar(totFlores) 
    EnviarMensaje(totFlores,robot5) 
    EnviarMensaje(2,robot5)
  fin
  
  robot tipo3
  variables
    totFlores:numero
    av:numero
    ca:numero
    alto:numero
  comenzar 
    RecibirMensaje(av,robot5)
    RecibirMensaje(ca,robot5)
    Pos(av,ca)
    RecibirMensaje(alto,robot5)
    totFlores:=0 
    recorrerYcontar(3,alto,totFlores)   
    Informar(totFlores) 
    EnviarMensaje(totFlores,robot5) 
    EnviarMensaje(3,robot5)
  fin
  
  robot tipo4
  variables
    totFlores:numero
    av:numero
    ca:numero
    alto:numero
  comenzar 
    RecibirMensaje(av,robot5)
    RecibirMensaje(ca,robot5)
    Pos(av,ca)
    RecibirMensaje(alto,robot5)
    totFlores:=0 
    recorrerYcontar(3,alto,totFlores)   
    Informar(totFlores)  
    EnviarMensaje(totFlores,robot5)
    EnviarMensaje(4,robot5)
  fin
  
  robot tipo5
  variables
    aux:numero
    totFlores:numero
    max:numero
    maxRobot:numero
    quienSos:numero
  comenzar
    max:=-1
    enviarInicioRobot(1,12,10)
    enviarInicioRobot(2,16,10)
    enviarInicioRobot(3,20,10)
    enviarInicioRobot(4,24,10)
    enviarAlto(1)
    enviarAlto(2)
    enviarAlto(3)
    enviarAlto(4)
    totFlores:=0
    RecibirMensaje(aux,*)    
    RecibirMensaje(quienSos,*)
    evaluarMax(aux,quienSos,max,maxRobot)
    totFlores:=totFlores+aux
    RecibirMensaje(aux,*)
    RecibirMensaje(quienSos,*)
    evaluarMax(aux,quienSos,max,maxRobot)
    totFlores:=totFlores+aux
    RecibirMensaje(aux,*)
    RecibirMensaje(quienSos,*)
    evaluarMax(aux,quienSos,max,maxRobot)
    totFlores:=totFlores+aux
    RecibirMensaje(aux,*)
    RecibirMensaje(quienSos,*)
    evaluarMax(aux,quienSos,max,maxRobot)
    totFlores:=totFlores+aux
    Informar(totFlores)
    Informar(maxRobot)
  fin
  
variables
  robot1:tipo1
  robot2:tipo2
  robot3:tipo3
  robot4:tipo4
  robot5:tipo5
  
comenzar
  AsignarArea(robot1,ciudad)
  AsignarArea(robot2,ciudad)
  AsignarArea(robot3,ciudad)
  AsignarArea(robot4,ciudad)
  AsignarArea(robot5,ciudad)
  Iniciar(robot1, 2,2)
  Iniciar(robot2, 6,2)
  Iniciar(robot3, 10,2)
  Iniciar(robot4, 14,2)
  Iniciar(robot5, 1,1)
fin
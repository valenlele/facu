programa ej1Clase4

procesos
  proceso recorrerYTomarAv(ES cantElem:numero; E FoP:numero; E r:numero)
  variables
    avAct:numero
    caAct:numero
  comenzar
    repetir 99
      avAct:=PosAv
      caAct:=PosCa
      si FoP=0
        mientras HayFlorEnLaEsquina
          tomarFlor
          cantElem:=cantElem+1  
      sino
        si FoP=1
          mientras HayPapelEnLaEsquina
            tomarPapel
            cantElem:=cantElem+1     
      BloquearEsquina(avAct,caAct+r)  
      mover
      LiberarEsquina(avAct,caAct)
  fin
  
  proceso recorrerYTomarCa(ES cantElem:numero; E FoP:numero; E r:numero)
  variables
    avAct:numero
    caAct:numero
  comenzar
    derecha
    repetir 99
      avAct:=PosAv
      caAct:=PosCa
      si FoP=0
        mientras HayFlorEnLaEsquina
          tomarFlor
          cantElem:=cantElem+1  
      sino
        si FoP=1
          mientras HayPapelEnLaEsquina
            tomarPapel
            cantElem:=cantElem+1     
      BloquearEsquina(avAct+r,caAct)  
      mover
      LiberarEsquina(avAct,caAct)
  fin
  
areas
  av1: AreaC (1,1,1,99)
  av100: AreaC (100,2,100,100)
  ca1: AreaC (2,1,100,1)
  ca100: AreaC (1,100,99,100)
  esqR1: AreaP (49,50,49,50)
  esqR2: AreaP (50,49,50,49)
  
robots
  robot tipo1
  variables
    FoP:numero
    cantF:numero
    r:numero
    avI:numero
    caI:numero
  comenzar
    FoP:=0
    cantF:=0
    r:=1
    avI:=PosAv
    caI:=PosCa
    BloquearEsquina(1,1)
    Pos(1,1)
    repetir 2
      recorrerYTomarAv(cantF,FoP,r)
      recorrerYTomarCa(cantF,FoP,r)
      derecha
      r:=-1
    Pos(avI,caI)
    LiberarEsquina(1,1)
    Informar(cantF)
  fin
  
  robot tipo2
  variables
    FoP:numero
    cantP:numero
    r:numero
    avI:numero
    caI:numero
  comenzar
    FoP:=1
    cantP:=0
    r:=1
    avI:=PosAv
    caI:=PosCa
    BloquearEsquina(1,1)
    Pos(1,1)
    repetir 2
      recorrerYTomarAv(cantP,FoP,r)
      recorrerYTomarCa(cantP,FoP,r)
      derecha
      r:=-1
    Pos(avI,caI)
    LiberarEsquina(1,1)
    Informar(cantP)
  fin
  
variables
  robot1:tipo1
  robot2:tipo2
  
comenzar
  AsignarArea(robot1, av1)
  AsignarArea(robot1, av100)
  AsignarArea(robot1, ca1)
  AsignarArea(robot1, ca100)
  AsignarArea(robot1, esqR1)
  AsignarArea(robot2, av1)
  AsignarArea(robot2, av100)
  AsignarArea(robot2, ca1)
  AsignarArea(robot2, ca100)
  AsignarArea(robot2, esqR2)
  Iniciar(robot1, 49,50)
  Iniciar(robot2, 50,49)
fin